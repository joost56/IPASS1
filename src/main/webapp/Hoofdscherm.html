<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="Style.css"/>
    <title>Factuur</title>
</head>
<body>
<aside>
    <h2>Menu</h2>
    <hr/>
    <h3>hier komen de klanten</h3>
    <article>
        <input type="submit" value="wijzig klantgegevens" id="wijzig klant gegevens" />&nbsp;
        <button type="button" id="uitloggen"> <a href="index.html">Log uit</a></button>&nbsp;

    </article>
</aside>

<form id="POSTurenform">
    <label for="uren">Gewerkte uren:<input type="number" id="uren" name="uren"/></label>
    <label for="omschrijving">Uren omschrijving:<input type="text" id="omschrijving" name="omschrijving"/></label>
<!--    <p id="date"></p>-->
<!--    <p id="id"></p>-->
    <input type="button" id="postNoJackson" value="opslaan"><br><br>
<!--    <input type="button" id="postJackson" value="opslaan!!!!!">-->
</form>

<form id="PUTurenform">
    <label for="putid">id:<input type="text" id="putid" name="id"></label>
    <label for="puturen">uren:<input type="number" id="puturen" name="uren"/></label>
    <label for="putomschrijving">omschrijving:<input type="text" id="putomschrijving" name="omschrijving"/></label><br><br>
    <input type="button" id="put" value="Wijzig!">

</form>

<form id="DELETEurenform">
    <label for="deleteid">id:<input type="number" id="deleteid" name="id"></label>
    <input type="button" id="delete" value="Delete!">

</form>

<section>
    <a href="/rest/uren">Bekijk alle uren </a>

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <button id="genereer factuur" onclick="Export2Doc('exportContent');">Genereer als factuur</button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <div id="exportContent">
        <p class="hide-me">
        </p>
<!--        <p id="pakketje">-->
    </div>
</section>



<script type="text/javascript">


    document.querySelector("#postNoJackson").addEventListener("click", function() {
        var formData = new FormData(document.querySelector("#POSTurenform"));
        var encData = new URLSearchParams(formData.entries());

        fetch("rest/uren/nojackson", {method: 'POST', body: encData})
            .then(response => response.json())
            .then(function (myJson) {
                console.log(myJson);
            });
    });

    document.querySelector("#put").addEventListener("click", function () {
        var id = document.querySelector("#putid").value;
        var formData = new FormData(document.querySelector("#PUTurenform"));
        var encData = new URLSearchParams(formData.entries());

        fetch("rest/uur/"+ id, { method: 'PUT', body:encData })
            .then(response => response.json())
            .then(function (myJson) {
                console.log(myJson);
            });

    });

    document.querySelector("#delete").addEventListener("click", function () {
        var id = document.querySelector("#deleteid").value;

        fetch("rest/uur/" + id, {method: 'DELETE'})
            .then(function (response) {
                if (response.ok) console.log("Uur verwijderd")
                else if (response.status == 404) console.log("Uur niet gevonden")
                else console.log("Er gebeurde iets raars")
            });
    });



    // document.querySelector("#postJackson").addEventListener("click", function() {
    //     var formData = new FormData(document.querySelector("#POSTurenform"));
    //     var encData = new URLSearchParams(formData.entries());
    //
    //     fetch("rest/uren/jackson", {method: 'POST', body: encData})
    //         .then(response => response.json())
    //         .then(function (myJson) {
    //             console.log(myJson);
    //         });
    // });

    // function f() {
    //     let omschrijvingJson = myJson.omschrijving;
    //     let urenJson = myJson.uren;
    //     console.log(omschrijvingJson);
    //     console.log(urenJson);
    // }
    // document.getElementById("pakketje").innerHTML=f();

    //voor de word file
    function Export2Doc(element, filename = ''){
        var preHtml = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>";
        var postHtml = "</body></html>";
        var html = preHtml+document.getElementById(element).innerHTML+postHtml;
        var blob = new Blob(['\ufeff', html], {
            type: 'appliaction/msword'
        });
        var url = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(html);
        filename = filename?filename+'.doc':'document.doc';
        var downloadLink = document.createElement("a");
        document.body.appendChild(downloadLink);
        if (navigator.msSaveOrOpenBlob ){
            navigator.msSaveOrOpenBlob(blob, filename);
        }else{
            downloadLink.href = url;
            downloadLink.download = filename;
            downloadLink.click();
        }
        document.body.removeChild(downloadLink);
    }
</script>