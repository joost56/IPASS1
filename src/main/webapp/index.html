<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="Stylesheet" href="Inlog.css"/>
    <title>Inlogscherm</title>
</head>
<body>
<section>
    <h2>Inlogscherm</h2>
    <form id="loginform" action="Hoofdscherm.html" >
        <input type="text" placeholder="emailadres" name="username" id="username"/><br>
        <input type="password" placeholder="wachtwoord" name="password" id="password"/><br>
        <input type="submit" value="login" id="login" />
    </form>
</section>

</body>
</html>





<script type="text/javascript">
    function login(event) {
        var formData = new FormData(document.querySelector("#loginform"));
        var encData = new URLSearchParams(formData.entries());

        fetch("rest/authentication", { method: 'POST', body: encData })
            .then(function (response) {
                if (response.ok) return response.json();
                else throw "wrong username/password";
            })
            .then(myJson => window.sessionStorage.setItem("myJWT", myJson.JWT))
            .catch(error => console.log(error));
    }
    document.querySelector("#login").addEventListener("click", login);
</script>

</body>
</html>